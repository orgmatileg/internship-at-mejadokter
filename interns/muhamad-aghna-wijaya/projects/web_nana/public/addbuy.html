<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Tambah Buyer</title>
  <link rel="stylesheet" href="/output.css">
</head>

<body class="min-h-screen bg-gray-100">
  <div class="max-w-xl mx-auto mt-10 bg-white p-8 rounded-lg shadow">
    <h2 class="text-2xl font-bold mb-4">Tambah Buyer</h2>
    <form action="/buyers/:id" method="POST" id="buyerForm">
      <div class="mb-4">
        <label class="block mb-1 font-medium">Nama gunung</label>
        <input type="text" id="houseName" class="w-full border p-2 rounded bg-gray-100" disabled>
        <input type="hidden" name="house_id" id="houseId">
      </div>

      <div class="mb-4">
        <label class="block mb-1 font-medium">Nama Buyer</label>
        <input type="text" name="nameB" class="w-full border p-2 rounded" required>
      </div>
      <div class="mb-4">
        <label class="block mb-1 font-medium">Kontak</label>
        <input type="text" name="contact" class="w-full border p-2 rounded" required>
      </div>
      <div class="mb-4">
        <label class="block mb-1 font-medium">Lokasi</label>
        <input type="text" name="location" class="w-full border p-2 rounded" required>
      </div>
      <div class="mb-4">
        <label class="block mb-1 font-medium">Pesan</label>
        <textarea name="Message" rows="4" class="w-full border p-2 rounded" required></textarea>
      </div>
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Submit</button>
    </form>

  </div>

  <script>
    const houseId = window.location.pathname.split('/').pop();
    document.getElementById('houseId').value = houseId;

    async function loadHouseName() {
      try {
        const res = await fetch(`/api/houses/${houseId}`);
        const data = await res.json();
        document.getElementById('houseName').value = data.name;
      } catch (err) {
        console.error('Gagal mengambil data rumah:', err);
      }
    }

    loadHouseName();
  </script>
</body>

</html>